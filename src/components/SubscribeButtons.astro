---
import { withBase } from '../lib/urls';

const siteBase = import.meta.env.SITE ?? 'https://reversim.github.io';
const podcastFeed = new URL(withBase('/podcast.xml'), siteBase).toString();

const links = [
	{ href: `pcast://${podcastFeed.replace(/^https?:\/\//, '')}`, label: 'Any App', kind: 'app' },
	{ href: withBase('/podcast.xml'), label: 'Podcast RSS', kind: 'rss' },
	{ href: withBase('/rss.xml'), label: 'Site RSS', kind: 'rss' },
];
---

<div class="subscribe-strip" aria-label="קישורי הרשמה לפודקאסט">
	<span class="subscribe-label">הרשמה:</span>
	{links.map((item) => (
		<a
			class={`subscribe-link subscribe-${item.kind}`}
			href={item.href}
			target={item.external ? '_blank' : undefined}
			rel={item.external ? 'noreferrer noopener' : undefined}
		>
			<span class="subscribe-icon" aria-hidden="true">
				{
					item.kind === 'rss' && (
						<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
							<path d="M6.18 15.64a2.18 2.18 0 1 1-2.18 2.18 2.18 2.18 0 0 1 2.18-2.18zM4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27zm0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93z" />
						</svg>
					)
				}
				{
					item.kind === 'app' && (
						<svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
							<path d="M7 2h10a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3zm0 2a1 1 0 0 0-1 1v12h12V5a1 1 0 0 0-1-1zm5 15a1.3 1.3 0 1 0 1.3 1.3A1.3 1.3 0 0 0 12 19.01z" />
						</svg>
					)
				}
			</span>
			{item.label}
		</a>
	))}
</div>
